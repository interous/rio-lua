'backend_c.rio import

'console singleton

'A '^int4 unit
'B '^int4 unit

'A 'A 'A derive+
'A 'A 'A derive-
'A 'A 'bool derive=
'A 'A 'bool derive/=
'B 'B 'B derive+
'A 'A 'B derive*

'print 'console {
  @val
  "#include <stdio.h>" backend-include
  { val repr-of '^int4 = }
  { "printf(\"%d\\n\", " val to-quote ");" ++ ++ backend-code }
  if
} write

{ 0 A @a 20 A @b
  { a 10 A /= }
  { 30 A 20 A }
  { 40 A 70 A }
  if ;b @c
  a b + c + print
  a b + c + print-aliases
} finalize
