'prelude.rio import

'console singleton

'A '^int4 unit
'B '^int4 unit

'A 'A 'A derive+
'A 'A 'A derive-
'B 'B 'B derive+
'A 'A 'B derive*
'A derive=
'B derive=
'A derive<
'#idx derive<
'#idx '#idx '#idx derive+

'print 'console {
  !val
  "stdio.h" backend-include
  val
  { val 1 A = }
    { 1 A - }
  { 'a 'b = }
    { 5 A - }
    { 6 A - }
  if
  :val
  "printf(\"%d\\n\", " val thunk->quote ");" ++ ++ backend-code
} write

{ 10 A !count
  0 A !i
  { i count < }
  { i print
    i 1 A + :i
  } while
} finalize
