'backend_c.rio import

'console singleton

'A '^int4 unit
'B '^int4 unit

'A 'bool derive-simply-numeric
'B 'bool derive-simply-numeric

'_A_delete { !data !name "deleting " name " which is bound to " data ++ ++ ++ print } macro

'print 'console {
  !val
  "#include <stdio.h>" backend-include
  { val type-of '__quote = }
  { "printf(\"" val "\\n\");" ++ ++ backend-code }
  { val repr-of '^int4 = }
  { "printf(\"%d\\n\", " val to-quote ");" ++ ++ backend-code }
  if
} write

{ { 0 #idx !i } { i 10 #idx < } { i inc :i }
  { "hello world" print }
  for
} finalize
